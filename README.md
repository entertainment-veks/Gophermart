# Gophermart
Demo project which implements accumulative loyalty system
- - -
### Система расчета баллов лояльности
### <p class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Система расчета баллов лояльности является внешним сервисом в&nbsp;доверенном контуре. Он&nbsp;работает по&nbsp;принципу чёрного ящика и&nbsp;недоступен для инспекции внешними клиентами. Система рассчитывает положенные баллы лояльности за&nbsp;совершённый заказ по&nbsp;сложным алгоритмам, которые могут меняться в&nbsp;любой момент времени.</p><p class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Внешнему потребителю доступна только информация о&nbsp;количестве положенных за&nbsp;конкретный заказ баллов лояльности. Причины наличия или отсутствия начислений внешнему потребителю неизвестны.</p><p class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Протокол взаимодействия с&nbsp;сервисом базы будет предоставлен в&nbsp;конце.</p>
### Сводное HTTP API
### <p class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Накопительная система лояльности «Гофермарт» должна предоставлять следующие HTTP-хендлеры:</p><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`POST /api/user/register`&nbsp;— регистрация пользователя;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`POST /api/user/login`&nbsp;— аутентификация пользователя;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`POST /api/user/orders`&nbsp;— загрузка пользователем номера заказа для расчёта;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`GET /api/user/orders`&nbsp;— получение списка загруженных пользователем номеров заказов, статусов их&nbsp;обработки и&nbsp;информации о&nbsp;начислениях;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`GET /api/user/balance`&nbsp;— получение текущего баланса счёта баллов лояльности пользователя;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`POST /api/user/balance/withdraw`&nbsp;— запрос на&nbsp;списание баллов с&nbsp;накопительного счёта в&nbsp;счёт оплаты нового заказа;</li><li style="box-sizing: inherit; position: relative;">`GET /api/user/balance/withdrawals`&nbsp;— получение информации о&nbsp;выводе средств с&nbsp;накопительного счёта пользователем.</li></ul>
### Общие ограничения и&nbsp;требования
### <ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">хранилище данных&nbsp;— PostgreSQL;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">структура таблиц остаётся на&nbsp;усмотрение студента;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">типы и&nbsp;формат хранения данных (в&nbsp;том числе паролей и&nbsp;прочей чувствительной информации) остаётся на&nbsp;усмотрение студента;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">клиент может поддерживать HTTP-запросы/ответы со&nbsp;сжатием данных;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">клиент не&nbsp;обязан делать запросы соответственно нижеизложенной спецификации API, любая проверка запроса остаётся на&nbsp;усмотрение студента;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">формат и&nbsp;алгоритм проверки аутентификации и&nbsp;авторизации пользователя остаётся на&nbsp;усмотрение студента;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">номера заказов уникальны и&nbsp;никогда не&nbsp;повторяются;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">номер заказа может быть принят в&nbsp;обработку только один раз от&nbsp;одного пользователя;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">номер заказа может не&nbsp;иметь никакого начисления;</li><li style="box-sizing: inherit; position: relative;">вознаграждение начисляется и&nbsp;тратится в&nbsp;виртуальных баллах из&nbsp;расчёта 1&nbsp;балл = 1&nbsp;рубль.</li></ul>
- - -
### **Регистрация пользователя**
### <p class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер:&nbsp;`POST /api/user/register`.</p><p class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Регистрация производится по паре логин/пароль. Каждый логин должен быть уникальным. После успешной регистрации должна происходить автоматическая аутентификация пользователя.</p><p class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Формат запроса:</p><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252); font-size: 18px;"><p class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></p><p class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"></p><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 698px; min-width: 100%; max-width: inherit; height: 211px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 699px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`POST /api/user/register HTTP/1.1 Content-Type: application/json ...  {     "login": "&lt;login&gt;",     "password": "&lt;password&gt;" } `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 207px;"><span style="color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Возможные коды ответа:</span></div></div></div></section><p></p></pre><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`200`&nbsp;— пользователь успешно зарегистрирован и аутентифицирован;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`400`&nbsp;— неверный формат запроса;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`409`&nbsp;— логин уже занят;</li><li style="box-sizing: inherit; position: relative;">`500`&nbsp;— внутренняя ошибка сервера.</li></ul>
- - -
### **Аутентификация пользователя**
### <div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер:&nbsp;`POST /api/user/login`.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Аутентификация производится по паре логин/пароль.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Формат запроса:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252); font-size: 18px;"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 698px; min-width: 100%; max-width: inherit; height: 211px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 699px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`POST /api/user/login HTTP/1.1 Content-Type: application/json ...  {     "login": "&lt;login&gt;",     "password": "&lt;password&gt;" } `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 207px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 694px;"></div></div></div></section></div></pre><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Возможные коды ответа:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`200`&nbsp;— пользователь успешно аутентифицирован;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`400`&nbsp;— неверный формат запроса;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`401`&nbsp;— неверная пара логин/пароль;</li><li style="box-sizing: inherit; position: relative;">`500`&nbsp;— внутренняя ошибка сервера.</li></ul>
#### <br>
<br>
### <div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер:&nbsp;`POST /api/user/orders`.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер доступен только аутентифицированным пользователям. Номером заказа является последовательность цифр произвольной длины.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Номер заказа может быть проверен на корректность ввода с помощью&nbsp;[алгоритма Луна](https://ru.wikipedia.org/wiki/%D0%90%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC_%D0%9B%D1%83%D0%BD%D0%B0).</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Формат запроса:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252); font-size: 18px;"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 698px; min-width: 100%; max-width: inherit; height: 139px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 699px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`POST /api/user/orders HTTP/1.1 Content-Type: text/plain ...  12345678903 `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 135px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 694px;"></div></div></div></section></div></pre><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Возможные коды ответа:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`200`&nbsp;— номер заказа уже был загружен этим пользователем;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`202`&nbsp;— новый номер заказа принят в обработку;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`400`&nbsp;— неверный формат запроса;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`401`&nbsp;— пользователь не аутентифицирован;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`409`&nbsp;— номер заказа уже был загружен другим пользователем;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`422`&nbsp;— неверный формат номера заказа;</li><li style="box-sizing: inherit; position: relative;">`500`&nbsp;— внутренняя ошибка сервера.</li></ul>
- - -
### **Получение списка загруженных номеров заказов**
### <div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер:&nbsp;`GET /api/user/orders`.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер доступен только авторизованному пользователю. Номера заказа в выдаче должны быть отсортированы по времени загрузки от самых старых к самым новым. Формат даты — RFC3339.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Доступные статусы обработки расчётов:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`NEW`&nbsp;— заказ загружен в систему, но не попал в обработку;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`PROCESSING`&nbsp;— вознаграждение за заказ рассчитывается;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`INVALID`&nbsp;— система расчёта вознаграждений отказала в расчёте;</li><li style="box-sizing: inherit; position: relative;">`PROCESSED`&nbsp;— данные по заказу проверены и информация о расчёте успешно получена.</li></ul><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Формат запроса:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252); font-size: 18px;"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 698px; min-width: 100%; max-width: inherit; height: 67px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 699px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`GET /api/user/orders HTTP/1.1 Content-Length: 0 `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 63px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 694px;"></div></div></div></section></div></pre><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Возможные коды ответа:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;"><div class="paragraph" style="box-sizing: inherit; margin-top: 0px;">`200`&nbsp;— успешная обработка запроса.</div><div class="paragraph" style="box-sizing: inherit;">Формат ответа:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252);"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 650px; min-width: 100%; max-width: inherit; height: 571px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 651px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`  200 OK HTTP/1.1   Content-Type: application/json   ...      [       {           "number": 9278923470,           "status": "PROCESSED",           "accrual": 500,           "uploaded_at": "2020-12-10T15:15:45+03:00"       },       {           "number": 12345678903,           "status": "PROCESSING",           "uploaded_at": "2020-12-10T15:12:01+03:00"       },       {           "number": 346436439,           "status": "INVALID",           "uploaded_at": "2020-12-09T16:09:53+03:00"       }   ]    `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 567px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 646px;"></div></div></div></section></div></pre></li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`204`&nbsp;— нет данных для ответа.</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`401`&nbsp;— пользователь не авторизован.</li><li style="box-sizing: inherit; position: relative;">`500`&nbsp;— внутренняя ошибка сервера.</li></ul>
- - -
### **Получение текущего баланса пользователя**
### <div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер:&nbsp;`GET /api/user/balance`.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер доступен только авторизованному пользователю. В ответе должны содержаться данные о текущей сумме баллов лояльности, а также сумме использованных за весь период регистрации баллов.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Формат запроса:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252); font-size: 18px;"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 698px; min-width: 100%; max-width: inherit; height: 67px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 699px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`GET /api/user/balance HTTP/1.1 Content-Length: 0 `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 63px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 694px;"></div></div></div></section></div></pre><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Возможные коды ответа:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;"><div class="paragraph" style="box-sizing: inherit; margin-top: 0px;">`200`&nbsp;— успешная обработка запроса.</div><div class="paragraph" style="box-sizing: inherit;">Формат ответа:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252);"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 650px; min-width: 100%; max-width: inherit; height: 235px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 651px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`  200 OK HTTP/1.1   Content-Type: application/json   ...      {       "current": 500.5,       "withdrawn": 42   }    `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 231px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 646px;"></div></div></div></section></div></pre></li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`401`&nbsp;— пользователь не авторизован.</li><li style="box-sizing: inherit; position: relative;">`500`&nbsp;— внутренняя ошибка сервера.</li></ul>
- - -
### **Запрос на списание средств**
### <div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер:&nbsp;`POST /api/user/balance/withdraw`</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер доступен только авторизованному пользователю. По факту запроса выводится вся сумма, доступная на счету. Вывод производится только на номер банковской карты.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Примечание: для успешного списания достаточно успешной регистрации запроса, никаких внешних систем начисления не предусмотрено и не требуется реализовывать.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Формат запроса:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252); font-size: 18px;"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 698px; min-width: 100%; max-width: inherit; height: 187px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 699px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`GET /api/user/withdrawals HTTP/1.1 Content-Type: application/json  {     "order": "2377225624",     "sum": 751 } `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 183px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 694px;"></div></div></div></section></div></pre><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Здесь&nbsp;`order`&nbsp;— номер заказа, а&nbsp;`sum`&nbsp;— сумма баллов к списанию в счёт оплаты.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Возможные коды ответа:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`200`&nbsp;— успешная обработка запроса;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`401`&nbsp;— пользователь не авторизован;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`402`&nbsp;— на счету недостаточно средств;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`422`&nbsp;— неверный номер заказа;</li><li style="box-sizing: inherit; position: relative;">`500`&nbsp;— внутренняя ошибка сервера.</li></ul>
- - -
### **Получение информации о выводе средств**
### <div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер:&nbsp;`GET /api/user/balance/withdrawals`.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Хендлер доступен только авторизованному пользователю. Факты выводов в выдаче должны быть отсортированы по времени вывода от самых старых к самым новым. Формат даты — RFC3339.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Формат запроса:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252); font-size: 18px;"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 698px; min-width: 100%; max-width: inherit; height: 67px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 699px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`GET /api/user/withdrawals HTTP/1.1 Content-Length: 0 `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 63px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 694px;"></div></div></div></section></div></pre><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Возможные коды ответа:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;"><div class="paragraph" style="box-sizing: inherit; margin-top: 0px;">`200`&nbsp;— успешная обработка запроса.</div><div class="paragraph" style="box-sizing: inherit;">Формат ответа:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252);"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 650px; min-width: 100%; max-width: inherit; height: 331px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 651px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`  200 OK HTTP/1.1   Content-Type: application/json   ...      [       {           "order": "2377225624",           "sum": 500,           "status": "PROCESSED",           "processed_at": "2020-12-09T16:09:57+03:00"       }   ]    `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 327px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 646px;"></div></div></div></section></div></pre></li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`401`&nbsp;— пользователь не авторизован.</li><li style="box-sizing: inherit; position: relative;">`500`&nbsp;— внутренняя ошибка сервера.</li></ul>
### Взаимодействие с системой расчёта начислений баллов лояльности
### <div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Для взаимодействия с системой доступен один хендлер:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative;">`GET /api/orders/{number}`&nbsp;— получение информации о расчёте начислений баллов лояльности.</li></ul><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Формат запроса:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252); font-size: 18px;"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 698px; min-width: 100%; max-width: inherit; height: 67px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 699px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`GET /api/orders/{number} HTTP/1.1 Content-Length: 0 `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 63px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 694px;"></div></div></div></section></div></pre><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Возможные коды ответа:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;"><div class="paragraph" style="box-sizing: inherit; margin-top: 0px;">`200`&nbsp;— успешная обработка запроса.</div><div class="paragraph" style="box-sizing: inherit;">Формат ответа:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252);"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 650px; min-width: 100%; max-width: inherit; height: 259px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 651px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`  200 OK HTTP/1.1   Content-Type: application/json   ...      {       "order": "&lt;number&gt;",       "status": "PROCESSED",       "accrual": 500   }    `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 255px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 646px;"></div></div></div></section></div></pre><div class="paragraph" style="box-sizing: inherit;">Поля объекта ответа:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`order`&nbsp;— номер заказа;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;"><div class="paragraph" style="box-sizing: inherit; margin-top: 0px;">`status`&nbsp;— статус расчёта начисления:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`REGISTERED`&nbsp;— заказ зарегистрирован, но не начисление не рассчитано;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`INVALID`&nbsp;— заказ не принят к расчёту, и вознаграждение не будет начислено;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">`PROCESSING`&nbsp;— расчёт начисления в процессе;</li><li style="box-sizing: inherit; position: relative;">`PROCESSED`&nbsp;— расчёт начисления окончен;</li></ul></li><li style="box-sizing: inherit; position: relative;"><div class="paragraph" style="box-sizing: inherit; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px;">`accrual`&nbsp;— рассчитанные баллы к начислению, при отсутствии начисления — поле отсутствует в ответе.</div></li></ul></li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;"><div class="paragraph" style="box-sizing: inherit; margin-top: 0px;">`429`&nbsp;— превышено количество запросов к сервису.</div><div class="paragraph" style="box-sizing: inherit;">Формат ответа:</div><pre class="code-block code-block_theme_light" style="position: relative; box-sizing: inherit; border-top-color: rgb(223, 229, 238); border-right-color: rgb(223, 229, 238); border-bottom-color: rgb(223, 229, 238); border-left-color: rgb(223, 229, 238); color: rgb(56, 58, 66); background-color: rgb(247, 249, 252);"><div class="code-block__tools" style="position: absolute; right: 8px; display: flex; color: rgb(184, 189, 191); box-sizing: inherit;"><span class="code-block__clipboard" style="cursor: pointer; transition-property: opacity, color; transition-duration: 0.15s, 0.15s; opacity: 0; box-sizing: inherit;">Скопировать код</span></div><div class="scrollable-default scrollable scrollable_theme_light code-block__scrollable" style="box-sizing: inherit; position: relative; display: flex; flex-direction: column; min-height: 0px;"><div style="box-sizing: inherit;"></div><div class="scrollable__content-wrapper" style="display: flex; overflow-x: hidden; overflow-y: hidden; flex-direction: column; width: 650px; min-width: 100%; max-width: inherit; height: 163px; min-height: 100%; max-height: inherit;"><div class="scrollbar-remover scrollable__content-container" style="overflow-x: scroll; overflow-y: scroll; min-width: 100%; max-width: inherit; min-height: 100%; max-height: inherit; position: relative; display: flex; flex-direction: column; flex-grow: 1; box-sizing: content-box !important;"><div class="scrollable__content" style="box-sizing: inherit; flex-grow: 1; flex-shrink: 0; width: 651px;"><div class="code-block__code-wrapper" style="display: inline-block; padding-top: 0; box-sizing: inherit;">`  429 Too Many Requests HTTP/1.1   Content-Type: text/plain   Retry-After: 60      No more than N requests per minute allowed    `</div><div style="box-sizing: inherit;"></div></div></div></div><section class="scrollbar-default scrollbar scrollbar_vertical scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_vertical" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; top: 0px; right: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; width: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 2px; padding-right: 5px; padding-bottom: 2px; padding-left: 5px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; height: 159px;"></div></div></div></section><section class="scrollbar-default scrollbar scrollbar_horizontal scrollbar_hidden scrollable__scrollbar scrollable__scrollbar_type_horizontal" size="1" style="box-sizing: inherit; position: absolute; display: flex; align-items: center; overflow-x: hidden; overflow-y: hidden; cursor: pointer; transition-property: opacity, background; transition-duration: 0.3s, 0.3s; pointer-events: none; opacity: 0; flex-direction: column; bottom: 0px; left: 0px;"><div class="scrollbar__control-container" style="box-sizing: inherit; position: relative; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-image: none; height: 16px;"><div class="scrollbar__control" style="position: absolute; top: 0px; transition-property: height, opacity; transition-duration: 0.1s, 0.3s; padding-top: 5px; padding-right: 2px; padding-bottom: 5px; padding-left: 2px;"><div class="scrollbar__control-line" style="box-sizing: inherit; transition-property: background; transition-duration: 0.3s; transition-timing-function: initial; transition-delay: initial; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: initial; width: 646px;"></div></div></div></section></div></pre></li><li style="box-sizing: inherit; position: relative;"><div class="paragraph" style="box-sizing: inherit; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px;">`500`&nbsp;— внутренняя ошибка сервера.</div></li></ul><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Заказ может быть взят в расчёт в любой момент после его совершения. Время выполнения расчёта системой не регламентировано. Статусы&nbsp;`INVALID`&nbsp;и&nbsp;`PROCESSED`&nbsp;являются окончательными.</div><div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Общее количество запросов информации о начислении не ограничено.</div>
### Конфигурирование сервиса накопительной системы лояльности
### <div class="paragraph" style="box-sizing: inherit; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;">Сервис должен поддерживать конфигурирование следующими методами:</div><ul style="box-sizing: inherit; padding-top: 0; padding-right: 0; padding-bottom: 0; list-style-type: none; list-style-image: none; color: rgb(0, 0, 0); font-family: &quot;YS Text&quot;, Arial, Helvetica, sans-serif; font-size: 18px;"><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">адрес и порт запуска сервиса: переменная окружения ОС&nbsp;`RUN_ADDRESS`&nbsp;или флаг&nbsp;`-a`;</li><li style="box-sizing: inherit; position: relative; margin-top: 0; margin-right: 0;">адрес подключения к базе данных: переменная окружения ОС&nbsp;`DATABASE_URI`или флаг&nbsp;`-d`;</li><li style="box-sizing: inherit; position: relative;">адрес системы расчёта начислений: переменная окружения ОС&nbsp;`ACCRUAL_SYSTEM_ADDRESS`&nbsp;или флаг&nbsp;`-r`.</li></ul>
